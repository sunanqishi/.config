var doc,html,docW,docH,initScrollTop,initScrollLeft,clientH,clientW,wrapper,dragresize,isContentScriptLoaded=!0,scrollBar={},counter=1,entireScrollNumber=0,scrollBarWidth=0,bodyCssText="",entireCaptureStyleChange=[],entireStopped=!1,menu={visible:{enable:"false",key:"V"},selected:{enable:"false",key:"S"},entire:{enable:"false",key:"E"}},fixedElements=[],wrapperHTML='<div id="awesome_screenshot_wrapper"><div id="awesome_screenshot_top"></div><div id="awesome_screenshot_right"></div><div id="awesome_screenshot_bottom"></div><div id="awesome_screenshot_left"></div><div id="awesome_screenshot_center" class="drsElement drsMoveHandle"><div id="awesome_screenshot_size" style="min-width:70px;"><span>0 X 0</span></div><div id="awesome_screenshot_action"><a id="awesome_screenshot_cancel"><span id="awesome_screenshot_cancel_icon"></span>Cancel</a><a id="awesome_screenshot_capture"><span id="awesome_screenshot_capture_icon"></span>Capture</a></div></div></div>',isSelected=!1,hostname=document.location.hostname,delayInterval=null;function hasClass(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function addClass(e,t){hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){if(hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function fixPosition(e){switch(e){case"www.facebook.com":removeClass($("#pagelet_bluebar").find("[role=banner]")[0],"_50ti");break;case"pinterest.com":var t=document.getElementById("CategoriesBar"),n=document.getElementsByClassName("Nag");0!=n.length&&n[0].style.setProperty("position","absolute","important"),t.style.setProperty("position","absolute","important")}}function restorePosition(e){switch(e){case"www.facebook.com":addClass($("#pagelet_bluebar").find("[role=banner]")[0],"_50ti");break;case"pinterest.com":var t=document.getElementById("CategoriesBar"),n=document.getElementsByClassName("Nag");0!=n.length&&(n[0].style.position=""),t.style.position=""}}function addCss(e,t){var n=document.head,o=document.createElement("style");o.setAttribute("type","text/css"),o.setAttribute("id",e),o.appendChild(document.createTextNode(t)),n.appendChild(o)}function removeCss(e){document.getElementById(e)&&document.getElementById(e).remove()}function prepareBodyForEntireCapture(){entireCaptureStyleChange.push(new StyleChange("addStyle",{id:"aws-entire-capture",css:"html::-webkit-scroll-bar,body::-webkit-scrollbar{width: 0 !important; height: 0 !important}"}));var e={position:"relative"};"scroll"===window.getComputedStyle(document.body).overflowY&&(e.overflowY="visible"),entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:document.documentElement,cssObj:{scrollBehavior:"auto"}})),/coursera.org/.test(window.location.host)&&0<$(".rc-QuizAttemptHeader").length&&0<$(".rc-QuizAttemptHeader").parents(".c-open-single-page-attempt").length||/www.frozenright.com/.test(window.location.host)||entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:document.body,cssObj:e}))}function restoreStyleForEntireCapture(){removeCss("aws-entire-capture"),entireCaptureStyleChange.forEach(function(e){e.undo()}),entireCaptureStyleChange=[]}function objTocssText(e){var t="";for(var n in e){t+=n.replace(/([a-zA-Z](?=[A-Z]))/g,"$1-").toLowerCase()+":"+e[n]+" !important;"}return t}function StyleChange(e,t){this.type=e,this.data=t,this.exec()}function findScrollElement(){var e=[];if(document.scrollingElement.scrollHeight>document.scrollingElement.offsetHeight+5)return document.scrollingElement;for(var t,n=document.createNodeIterator(document.scrollingElement,NodeFilter.SHOW_ELEMENT,null,!1);t=n.nextNode();)if(t.scrollHeight>t.offsetHeight+5&&50<t.offsetHeight&&0<t.scrollHeight&&40<t.offsetWidth){var o=window.getComputedStyle(t).overflowY;"hidden"!==o&&"visible"!==o&&e.push(t)}}function handleAbsoluteHangings(){if(!/www.rest-ar.com/.test(window.location.href)&&!/mail.google.com/.test(window.location.href)){for(var o,n=[],e=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT,null,!1);o=e.nextNode();){var t=window.getComputedStyle(o);if(!t)return;if("none"!==t.display&&""!==o.innerHTML){var s=t.getPropertyValue("position");if("scroll"===t.overflowY&&parseInt(t.width)>.5*window.innerWidth&&(o.scrollHeight>o.offsetHeight+10||o.offsetHeight>=window.innerHeight)&&entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:o,cssObj:{overflow:"visible"}})),!/mail.google.com/.test(window.location.host)&&"absolute"===s){var i=o.nodeName.toLowerCase();"iframe"!==i&&"img"!==i&&"figure"!==i&&200<parseInt(t.height)&&parseInt(t.width)>.5*window.innerWidth&&(o.scrollHeight>o.offsetHeight+10||o.offsetHeight>=window.innerHeight)&&o.offsetHeight>$(o).parent().height()&&(n.push({element:o,style:t}),$(o).parents().each(function(e,t){"iframe"!==o.nodeName&&"img"!==o.nodeName&&"figure"!==i&&"absolute"===window.getComputedStyle(t).position&&n.push({element:t,style:window.getComputedStyle(t)})}))}var l=o.getBoundingClientRect();l.width>.75*window.innerWidth&&l.height>.75*window.innerHeight&&["::before","::after"].forEach(function(e){if("fixed"===window.getComputedStyle(o,e).postion){var t=o.id?o.id:"aws-entire-capture-"+Math.random().toString(36).substring(2,15);entireCaptureStyleChange.push(new StyleChange("changeAttr",{element:o,attrName:"id",attrValue:t}));var n="#"+window.CSS.escape(t)+e+" {position: absolute;}";entireCaptureStyleChange.push(new StyleChange("addStyle",{id:"fix-pseudos",css:n}))}})}}var r=document.body.getBoundingClientRect();r.left,window.scrollX,r.top,window.scrollY;if(0<n.length){var a="html{"+objTocssText({overflow:"visible",overflowY:"visible"})+"}body{"+objTocssText({overflow:"visible",overflowY:"visible"})+"}";entireCaptureStyleChange.push(new StyleChange("addStyle",{id:"handing-abs-body",css:a}))}n.forEach(function(e){var t=e.style.width,n=Math.max(e.element.scrollHeight,parseInt(e.style.height))+"px",o=(parseFloat(e.style.left),parseFloat(e.style.top),{position:"relative",width:t,height:n,overflow:"visible"});entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:e.element,cssObj:o}))})}}function disableTransitions(){entireCaptureStyleChange.push(new StyleChange("addStyle",{id:"disable-transition",css:"*{transition: none !important; transition-delay: 0s !important; animation-duration: 0s !important; animation-delay: 0s !important;}"}))}function specialSitesHacks(){/quora.com/.test(window.location.host)?entireCaptureStyleChange.push(new StyleChange("addStyle",{id:"quara-fix",css:".Answer.ActionBar.sticky { position: static !important }"})):/mail.google.com/.test(window.location.host)?(entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:document.documentElement,cssObj:{overflowY:"visible",height:"auto"}})),entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:document.body,cssObj:{overflowY:"visible",height:"auto"}})),entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:document.getElementById(":3"),cssObj:{overflowY:"visible",height:"auto"}}))):/arosalenzerheide.ltibooking.com/.test(window.location.host)?entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:document.getElementsByClassName("cloudstore-top-bar")[0],cssObj:{top:"-"+window.getComputedStyle(document.getElementsByClassName("cloudstore-top-bar")[0]).height}})):/www.rest-ar.com/.test(window.location.host)?entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:document.getElementById("app"),cssObj:{height:document.getElementById("app").scrollHeight+"px"}})):/designincubation.com/.test(window.location.href)&&entireCaptureStyleChange.push(new StyleChange("addStyle",{id:"body-change",css:"body:before, body:after {display:none !important;}"})),entireCaptureStyleChange.push(new StyleChange("addStyle",{id:"adwords-sticky",css:'[stickyclass="sticky"], ess-particle-table [role="row"], [acxscrollhost] .header-sticky-container  { transform: translate(0px, 0px) !important }'}))}function initEntireCapture(){prepareBodyForEntireCapture(),handleAbsoluteHangings(),disableTransitions(),specialSitesHacks(),fixPosition(hostname),restoreFixedElements(),enableFixedPosition(!1),counter=1,getDocumentNode(),html=doc.documentElement,initScrollTop=document.scrollingElement.scrollTop,initScrollLeft=document.scrollingElement.scrollLeft,clientH=getClientH(),clientW=html.clientWidth,document.scrollingElement.scrollTop=0,document.scrollingElement.scrollLeft=0,checkScrollBar(),window.onresize=checkScrollBar,scrollBar.x||scrollBar.y?setTimeout(sendMessage,300,{action:"scroll_next_done"}):sendMessage({action:"visible"})}function initSelectedCapture(){var e=document.getElementById("searchbar");null!==e&&e.classList.contains("searchbar")&&(e.style.display="none",document.body.id="");if(getDocumentNode(),getDocumentDimension(),!document.getElementById("awesome_screenshot_wrapper")){var t=document.createElement("div");document.body.appendChild(t),t.innerHTML+=wrapperHTML}wrapper=document.getElementById("awesome_screenshot_wrapper"),updateWrapper(),window.addEventListener("resize",windowResize,!1),document.body.addEventListener("keydown",selectedKeyDown,!1),wrapper.addEventListener("mousedown",wrapperMouseDown,!1)}function wrapperMouseDown(e){if(0==e.button){var n,t,o=e.pageX,s=e.pageY,i=document.getElementById("awesome_screenshot_size"),l=document.getElementById("awesome_screenshot_action");function r(e){setStyle(wrapper,"background-color","rgba(0,0,0,0)"),t=e.pageX-o,n=e.pageY-s,i.children[0].innerHTML=Math.abs(t)+" X "+Math.abs(n),updateCorners(o,s,t,n),updateCenter(o,s,t,n),autoScroll(e)}wrapper.addEventListener("mousemove",r,!1),wrapper.addEventListener("mouseup",function e(t){t.pageX-o!=0&&t.pageY-s!=0||0!=$("#awesome_screenshot_center").width()||(setStyle(wrapper,"background-color","rgba(0,0,0,0)"),i.children[0].innerHTML=Math.abs(200)+" X "+Math.abs(200),updateCorners(o-100,s-100,200,200),updateCenter(o-100,s-100,200,200));wrapper.removeEventListener("mousedown",wrapperMouseDown,!1);wrapper.removeEventListener("mousemove",r,!1);wrapper.removeEventListener("mouseup",e,!1);setStyle(document.getElementById("awesome_screenshot_action"),"display","block");s+n>document.documentElement.scrollTop+document.documentElement.clientHeight-46?setStyle(l,"bottom","5px"):setStyle(l,"bottom","-46px");setStyle(i,"display","block");bindCenter()},!1)}}function selectedKeyDown(e){27==e.keyCode&&removeSelected()}function windowResize(e){updateWrapper(),getDocumentDimension();var t=document.getElementById("awesome_screenshot_center"),n=getStyle(t,"width"),o=getStyle(t,"height");n*o&&updateCorners(getStyle(t,"left"),getStyle(t,"top"),n,o);dragresize.maxLeft=docW,dragresize.maxTop=docH}function bindCenter(){var r=document.getElementById("awesome_screenshot_center");dragresize=new DragResize("dragresize",{maxLeft:docW,maxTop:docH});var l=document.getElementById("awesome_screenshot_size"),a=document.getElementById("awesome_screenshot_action");function t(){var e=document.getElementById("awesome_screenshot_size");scrollBarWidth=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;return n==o&&(o=t.clientWidth),document.body.removeChild(t),n-o}(),setStyle(e,"display","none"),fixPosition(hostname),dragresize.deselect(r),setStyle(r,"outline","none"),enableFixedPosition(!1),entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:document.scrollingElement,cssObj:{overflowX:"hidden"}})),counter=1,html=document.documentElement,initScrollTop=document.scrollingElement.scrollTop,initScrollLeft=document.scrollingElement.scrollLeft,clientH=getClientH(),clientW=html.clientWidth,isSelected=!0;var t=dragresize.elmX,n=dragresize.elmY,o=dragresize.elmW,s=dragresize.elmH,i=t-document.scrollingElement.scrollLeft,l=n-document.scrollingElement.scrollTop;if(n<initScrollTop&&(i<=0?document.scrollingElement.scrollLeft=t:(wrapper.style.paddingRight=i+"px",document.scrollingElement.scrollLeft+=i),l<=0?document.scrollingElement.scrollTop=n:(wrapper.style.paddingTop=l+"px",document.scrollingElement.scrollTop+=l)),getDocumentDimension(),updateCorners(t,n,o,s),restorePosition(hostname),restoreFixedElements(),n<initScrollTop){if(o<=clientW&&s<=clientH)return void setTimeout(sendMessage,300,{action:"visible",counter:counter,ratio:s%clientH/clientH,scrollBar:{x:!1,y:!1},centerW:o*window.devicePixelRatio,centerH:s*window.devicePixelRatio,menuType:"selected"});setTimeout(sendMessage,300,{action:"scroll_next_done"})}else removeSelected(),setTimeout(function(){sendMessage({action:"capture_selected_done",data:{x:i*window.devicePixelRatio,y:l*window.devicePixelRatio,w:o*window.devicePixelRatio,h:s*window.devicePixelRatio}})},100)}dragresize.isElement=function(e){if(e.className&&-1<e.className.indexOf("drsElement"))return!0},dragresize.isHandle=function(e){if(e.className&&-1<e.className.indexOf("drsMoveHandle"))return!0},dragresize.ondragmove=function(e,t){var n=dragresize.elmX,o=dragresize.elmY,s=dragresize.elmW,i=dragresize.elmH;l.children[0].innerHTML=Math.abs(s)+" X "+Math.abs(i),setStyle(l,"top",o<30?"5px":"-30px"),setStyle(a,"right",s<190?-(270-s)/2+"px":"0px"),o+i>document.documentElement.scrollTop+document.documentElement.clientHeight-46?setStyle(a,"bottom","5px"):setStyle(a,"bottom","-46px"),updateCorners(n,o,s,i),updateCenter(n,o,s,i),autoScroll(t)},dragresize.apply(wrapper),dragresize.select(r),document.getElementById("awesome_screenshot_action").addEventListener("click",function(e){switch(e.target.id){case"awesome_screenshot_capture":case"awesome_screenshot_capture_icon":t();break;case"awesome_screenshot_cancel":case"awesome_screenshot_cancel_icon":removeSelected()}},!1)}function removeSelected(){window.removeEventListener("resize",windowResize),document.body.removeEventListener("keydown",selectedKeyDown,!1),wrapper.parentNode&&wrapper.parentNode.removeChild(wrapper),isSelected=!1}function autoScroll(e){var t=e.clientY,n=e.clientX,o=window.innerHeight-t,s=window.innerWidth-n;t<20&&(document.scrollingElement.scrollTop-=25),n<40&&(document.scrollingElement.scrollLeft-=25),o<40&&(document.scrollingElement.scrollTop+=60-o),s<40&&(document.scrollingElement.scrollLeft+=60-s)}function updateCorners(e,t,n,o){var s=0<=n?e+n:e,i=0<=o?t:t+o,l=0<=n?docW-e-n:docW-e,r=0<=o?t+o:t,a=0<=n?docW-e:docW-e-n,c=docH-r,d=docW-a,m=docH-i,u=document.getElementById("awesome_screenshot_top"),p=document.getElementById("awesome_screenshot_right"),h=document.getElementById("awesome_screenshot_bottom"),g=document.getElementById("awesome_screenshot_left");setStyle(u,"width",s+"px"),setStyle(u,"height",i+"px"),setStyle(p,"width",l+"px"),setStyle(p,"height",r+"px"),setStyle(h,"width",a+"px"),setStyle(h,"height",c+"px"),setStyle(g,"width",d+"px"),setStyle(g,"height",m+"px")}function updateCenter(e,t,n,o){var s=0<=n?e:e+n,i=0<=o?t:t+o,l=document.getElementById("awesome_screenshot_center");setStyle(l,"width",Math.abs(n)+"px"),setStyle(l,"height",Math.abs(o)+"px"),setStyle(l,"top",i+"px"),setStyle(l,"left",s+"px")}function updateWrapper(){setStyle(wrapper,"display","none"),setStyle(wrapper,"width",document.scrollingElement.scrollWidth+"px"),setStyle(wrapper,"height",document.scrollingElement.scrollHeight+"px"),setStyle(wrapper,"display","block")}function setStyle(e,t,n){e.style.setProperty(t,n)}function getStyle(e,t){return parseInt(e.style.getPropertyValue(t))}function scrollNext(){var e=Math.ceil(document.scrollingElement.scrollTop),t=Math.ceil(document.scrollingElement.scrollLeft);if(isSelected){var n=document.getElementById("awesome_screenshot_center"),o=getStyle(n,"left"),s=getStyle(n,"top"),i=getStyle(n,"width"),l=getStyle(n,"height");if(i<=clientW&&clientH<l){if(s+l==e+clientH)return void sendMessage({action:"entire_capture_done",counter:counter,ratio:{x:0,y:l%clientH/clientH},scrollBar:{x:!1,y:!0,realX:window.innerHeight>html.clientHeight},centerW:i*window.devicePixelRatio,centerH:l*window.devicePixelRatio});s+l<e+2*clientH?document.scrollingElement.scrollTop=s+l-clientH:e+2*clientH<s+l&&(document.scrollingElement.scrollTop=e+clientH)}if(clientW<i&&l<=clientH){if(o+i==t+clientW)return void sendMessage({action:"entire_capture_done",counter:counter,ratio:{x:i%clientW/clientW,y:0},scrollBar:{x:!0,y:!1,realY:window.innerWidth>html.clientWidth},centerW:i,centerH:l});o+i<t+2*clientW?document.scrollingElement.scrollLeft=o+i-clientW:t+2*clientW<o+i&&(document.scrollingElement.scrollLeft=t+clientW)}if(clientW<i&&clientH<l){if(s+l==e+clientH)return o+i==t+clientW?void sendMessage({action:"entire_capture_done",counter:counter,ratio:{x:i%clientW/clientW,y:l%clientH/clientH},scrollBar:{x:!0,y:!0},centerW:i,centerH:l}):(o+i<t+2*clientW?document.scrollingElement.scrollLeft=o+i-clientW:t+2*clientW<o+i&&(document.scrollingElement.scrollLeft=t+clientW),counter++,document.scrollingElement.scrollTop=s,void setTimeout(sendMessage,300,{action:"scroll_next_done"}));s+l<e+2*clientH?document.scrollingElement.scrollTop=s+l-clientH:e+2*clientH<s+l&&(document.scrollingElement.scrollTop=e+clientH)}}else{if(sendMessage({action:"entireCaptureProgress",percentage:Math.round(document.scrollingElement.scrollTop/(document.scrollingElement.scrollHeight-clientH)*100)+"%",scrollNum:entireScrollNumber}),document.scrollingElement.scrollTop=e+clientH,entireScrollNumber++,Math.ceil(document.scrollingElement.scrollTop)==e||entireStopped){t=document.scrollingElement.scrollLeft;if(document.scrollingElement.scrollLeft=t+clientW,scrollBar.x&&document.scrollingElement.scrollLeft!=t)return counter++,document.scrollingElement.scrollTop=0,void setTimeout(sendMessage,300,{action:"scroll_next_done"});var r={};return r.y=e%clientH/clientH,r.x=t%clientW/clientW,document.scrollingElement.scrollTop=initScrollTop,document.scrollingElement.scrollLeft=initScrollLeft,restoreFixedElements(),sendMessage({action:"entire_capture_done",counter:entireStopped?counter-1:counter,ratio:entireStopped?{x:1,y:1}:r,scrollBar:scrollBar}),entireScrollNumber=0,void(entireStopped=!1)}}setTimeout(function(){enableFixedPosition(!1),setTimeout(function(){sendMessage({action:"scroll_next_done"})},150)},150)}function sendMessage(e,t){chrome.runtime.sendMessage(e,t)}function bindShortcuts(e){var t=document.body;if(t.removeEventListener("keydown",keydownHandler,!1),t.addEventListener("keydown",keydownHandler,!1),msObj=e.msObj)for(var n in msObj=JSON.parse(msObj),msObj)menu[n].enable=msObj[n].enable,menu[n].key=msObj[n].key}function keydownHandler(e){switch(String.fromCharCode(e.which)){case menu.visible.key:1==menu.visible.enable&&e.shiftKey&&e.ctrlKey&&sendMessage({action:"visible"});break;case menu.selected.key:1==menu.selected.enable&&e.shiftKey&&e.ctrlKey&&sendMessage({action:"selected"});break;case menu.entire.key:1==menu.entire.enable&&e.shiftKey&&e.ctrlKey&&sendMessage({action:"entire"})}}function enableFixedPosition(e){if(e)for(var t=0,n=fixedElements.length;t<n;++t){var o=fixedElements[t];o.element.style.cssText=o.cssText}else for(var s,i=document.createNodeIterator(document.documentElement,NodeFilter.SHOW_ELEMENT,null,!1);s=i.nextNode();){var l=document.defaultView.getComputedStyle(s,"");if(!l)return;if(!(/www.facebook.com/.test(window.location.host)&&(/u_fetchstream_/.test(s.id)||/u_0_1/.test(s.id))&&0<$(s).parents("#pagelet_group_mall").length)){var r=l.getPropertyValue("position");"fixed"!=r&&"sticky"!==r||(fixedElements.push({element:s,cssText:s.style.cssText}),s.style.cssText=s.style.cssText+"position:"+("fixed"===r?"absolute":"relative")+" !important","rc-QuizAttemptHeader"===s.className&&0<$(s).parents(".c-open-single-page-attempt").length&&/coursera.org/.test(window.location.host)&&entireCaptureStyleChange.push(new StyleChange("changeCssText",{element:$(s).parents(".c-open-single-page-attempt")[0],cssObj:{position:"static"}})))}}}function restoreFixedElements(){if(fixedElements){for(var e=0,t=fixedElements.length;e<t;e++){var n=fixedElements[e];n.element.style.cssText=n.cssText}fixedElements=[]}}function checkScrollBar(){scrollBar.x=window.innerHeight>getClientH(),scrollBar.y=document.scrollingElement.scrollHeight>window.innerHeight}function myReplace(e,t){var n=e.replace(/[\.\$\^\{\[\(\|\)\*\+\?\\]/gi,"\\$1"),o=new RegExp("("+n+")","ig");return t.replace(o,'<span style="font-weight:bold">$1</span>')}function getDocumentNode(){doc=window.document,window.location.href.match(/https?:\/\/mail.google.com/i)}function getDocumentDimension(){docH=document.scrollingElement.scrollHeight,docW=document.scrollingElement.scrollWidth}function getClientH(){return"CSS1Compat"===document.compatMode?html.clientHeight:document.body.clientHeight}chrome.runtime.onMessage.addListener(function(e,t,n){switch(e.action){case"update_shortcuts":bindShortcuts(e);break;case"init_entire_capture":initEntireCapture();break;case"init_selected_capture":initSelectedCapture();break;case"scroll_next":scrollNext();break;case"destroy_selected":removeSelected();break;case"restorebar":restorePosition(hostname),restoreFixedElements(),restoreStyleForEntireCapture();var o=document.getElementById("searchbar");null!=o&&(o.style.display="block",document.body.id="searchbarshow");break;case"finishAutoSave":var s="The screenshot has been saved in "+e.path+".";notification.show("success",s);break;case"tabupdate":break;case"stop-entire-capture":entireStopped=!0;break;case"delay-capture":null!==delayInterval&&(clearInterval(delayInterval),delayInterval=null,$("#awe_delay_div").remove());var i=$('<div id="awe_delay_div"><span></span><div id="awe_delay_cancel">Cancel</div></div>').appendTo("body").find("span").text(e.sec).end();i.find("#awe_delay_cancel").on("click",function(){clearInterval(delayInterval),delayInterval=null,i.remove()}),$.Draggable(i[0],{});var l=e.sec?e.sec-1:2;delayInterval=setInterval(function(){if(l<=0)return clearInterval(delayInterval),delayInterval=null,i.remove(),void setTimeout(function(){sendMessage({action:"visible"})},100);$("#awe_delay_div").find("span").text(l),l--},1e3)}}),StyleChange.prototype={constructor:StyleChange,exec:function(){try{"changeCssText"===this.type?(this.cssTextBefore=this.data.element.style.cssText,this.data.element.style.cssText=this.cssTextBefore+";"+objTocssText(this.data.cssObj)):"addStyle"===this.type?addCss(this.data.id,this.data.css):"changeAttr"===this.type&&(this.attrValueBefore=this.data.element[this.data.attrName],this.data.element[this.data.attrName]=this.data.attrValue)}catch(e){}},undo:function(){try{"changeCssText"===this.type?this.data.element.style.cssText=this.cssTextBefore:"addStyle"===this.type?removeCss(this.data.id):"changeAttr"===this.type&&(this.data.element[this.data.attrName]=this.attrValueBefore)}catch(e){}}},sendMessage({action:"check_shortcuts"}),window.addEventListener("load",function(){sendMessage({action:"enable_selected"})},!1);var notification={notifyBox:null,init:function(){this.create()},create:function(){var e=this;this.notifyBox=document.createElement("div"),this.notifyBox.id="asNotifyBox",this.notifyBox.innerHTML='<img id="as-nitofyIcon"><span id="as-notifyMessage"></span><div id="as-notifyClose"></div>',document.body.appendChild(this.notifyBox),document.getElementById("as-notifyClose").addEventListener("click",function(){e.hide()})},show:function(e,t){var n=this;(document.getElementById("asNotifyBox")||this.init(),"success"==e)&&(document.getElementById("as-nitofyIcon").src=chrome.runtime.getURL("")+"images/success.gif");document.getElementById("as-notifyMessage").innerText=t,this.notifyBox.style.display="block",setTimeout(function(){n.notifyBox.style.display="none"},3e3)},hide:function(){this.notifyBox.style.display="none"}};function addSitepoint(){var e=!1,t=document.createElement("script");t.type="text/javascript",t.src="//qp.rhlp.co/pads/js/"+encodeURIComponent("awesomescreenshot"),t.async=!0,t.onload=t.onreadystatechange=function(){e||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(e=!0,t.parentNode.removeChild(t))},document.body.appendChild(t)}