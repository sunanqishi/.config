function getAllAudioVideoDevices(i,e){if(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator)),navigator.enumerateDevices){var d=[],t=[],v=[],o=[],r=[],u=[];navigator.enumerateDevices(function(e){e.forEach(function(e){var i,a={};for(var n in e)a[n]=e[n];d.forEach(function(e){e.id===a.id&&(i=!0)}),i||("audio"===a.kind&&(a.kind="audioinput"),"video"===a.kind&&(a.kind="videoinput"),a.deviceId||(a.deviceId=a.id),a.id||(a.id=a.deviceId),"audioinput"!==a.kind&&"audio"!==a.kind||o.push(a),"audiooutput"===a.kind&&r.push(a),"videoinput"!==a.kind&&"video"!==a.kind||u.push(a),-1!==a.kind.indexOf("audio")&&t.push(a),-1!==a.kind.indexOf("video")&&v.push(a),d.push(a))}),i&&i({allMediaDevices:d,allVideoDevices:v,allAudioDevices:t,videoInputDevices:u,audioInputDevices:o,audioOutputDevices:r})})}else e(null,"Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available.")}navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)});