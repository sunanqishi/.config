var uploadVideo={YOUTUBE_BASE_URL:"https://www.googleapis.com/upload/youtube/v3/videos",getGoogleOauthToken:function(){return new Promise(function(t,e){var o=chrome.extension.getBackgroundPage();o.googleOAuth.autherize(function(e){t(e),$("#current-account").show(),$("#c-email").find("span").text(o.googleOAuth.getAccount().email)})})},uploadToYoutube:function(e,t){return this._upload(e,this.YOUTUBE_BASE_URL,t)},uploadToGoogleDrive:function(e,t){return this._upload(e,null,t)},_upload:function(a,u,i){return this.getGoogleOauthToken().then(function(n){return new Promise(function(o,t){if(u)var e={snippet:{title:a.name.replace(/\.webm$/,""),description:""},status:{privacyStatus:"Unlisted"}};else e={title:a.name,shareable:!0,shared:!0};new MediaUploader({baseUrl:u,file:a,token:n,metadata:e,params:{part:Object.keys(e).join(",")},onError:function(e){t(e)},onProgress:function(e){var t=Date.now(),o=e.loaded,n=e.total;this.uploadStartTime;i&&i(100*o/n)},onComplete:function(e){var t=JSON.parse(e);o(t)}}).upload()})})}};